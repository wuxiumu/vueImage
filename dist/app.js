!function(t){function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="/dist/",i(i.s=53)}([,function(t,i){t.exports=function(t,i,e,a,n,o){var r,s=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(r=t,s=t.default);var l="function"==typeof s?s.options:s;i&&(l.render=i.render,l.staticRenderFns=i.staticRenderFns,l._compiled=!0),e&&(l.functional=!0),n&&(l._scopeId=n);var c;if(o?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):a&&(c=a),c){var u=l.functional,d=u?l.render:l.beforeCreate;u?(l._injectStyles=c,l.render=function(t,i){return c.call(i),d(t,i)}):l.beforeCreate=d?[].concat(d,c):[c]}return{esModule:r,exports:s,options:l}}},,function(t,i){function e(t,i){var e=t[1]||"",n=t[3];if(!n)return e;if(i&&"function"==typeof btoa){var o=a(n);return[e].concat(n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"})).concat([o]).join("\n")}return[e].join("\n")}function a(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var i=[];return i.toString=function(){return this.map(function(i){var a=e(i,t);return i[2]?"@media "+i[2]+"{"+a+"}":a}).join("")},i.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(a[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&a[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),i.push(r))}},i}},function(t,i,e){function a(t){for(var i=0;i<t.length;i++){var e=t[i],a=c[e.id];if(a){a.refs++;for(var n=0;n<a.parts.length;n++)a.parts[n](e.parts[n]);for(;n<e.parts.length;n++)a.parts.push(o(e.parts[n]));a.parts.length>e.parts.length&&(a.parts.length=e.parts.length)}else{for(var r=[],n=0;n<e.parts.length;n++)r.push(o(e.parts[n]));c[e.id]={id:e.id,refs:1,parts:r}}}}function n(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function o(t){var i,e,a=document.querySelector("style["+v+'~="'+t.id+'"]');if(a){if(f)return g;a.parentNode.removeChild(a)}if(b){var o=p++;a=d||(d=n()),i=r.bind(null,a,o,!1),e=r.bind(null,a,o,!0)}else a=n(),i=s.bind(null,a),e=function(){a.parentNode.removeChild(a)};return i(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;i(t=a)}else e()}}function r(t,i,e,a){var n=e?"":a.css;if(t.styleSheet)t.styleSheet.cssText=_(i,n);else{var o=document.createTextNode(n),r=t.childNodes;r[i]&&t.removeChild(r[i]),r.length?t.insertBefore(o,r[i]):t.appendChild(o)}}function s(t,i){var e=i.css,a=i.media,n=i.sourceMap;if(a&&t.setAttribute("media",a),m.ssrId&&t.setAttribute(v,i.id),n&&(e+="\n/*# sourceURL="+n.sources[0]+" */",e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}var h="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!h)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=e(13),c={},u=h&&(document.head||document.getElementsByTagName("head")[0]),d=null,p=0,f=!1,g=function(){},m=null,v="data-vue-ssr-id",b="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,i,e,n){f=e,m=n||{};var o=l(t,i);return a(o),function(i){for(var e=[],n=0;n<o.length;n++){var r=o[n],s=c[r.id];s.refs--,e.push(s)}i?(o=l(t,i),a(o)):o=[];for(var n=0;n<e.length;n++){var s=e[n];if(0===s.refs){for(var h=0;h<s.parts.length;h++)s.parts[h]();delete c[s.id]}}}};var _=function(){var t=[];return function(i,e){return t[i]=e,t.filter(Boolean).join("\n")}}()},,,,,,,,,function(t,i){t.exports=function(t,i){for(var e=[],a={},n=0;n<i.length;n++){var o=i[n],r=o[0],s=o[1],h=o[2],l=o[3],c={id:t+":"+n,css:s,media:h,sourceMap:l};a[r]?a[r].parts.push(c):e.push(a[r]={id:r,parts:[c]})}return e}},function(t,i){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){"use strict";i.a={methods:{initPositions:function(){var t=this,i=t.model,e=i.background,a=i.ratio,n=i.positions;t.ratio=a||1;var o=new Image;o.src=e,o.onload=function(){var i=$(".img_effect_bg"),e=i.width(),a=i.height(),r=i.offset();t.bgX=r.left,t.bgY=r.top,o.naturalWidth?(t.setBackgroundSize(e,a,o.naturalWidth,o.naturalHeight),t.originalAvatars=n):(t.setBackgroundSize(e,a,o.width,o.height),t.originalAvatars=n)}},setBackgroundSize:function(t,i,e,a){this.ratioWidth=t/e,this.ratioHeight=i/a}},watch:{model:{handler:"initPositions",deep:!0}}}},function(t,i,e){"use strict";i.a={wrapUrl:function(t){t=t||"";var i=window.location.href,e=new URL(t,i);return new URL(i).searchParams.forEach(function(t,i){e.searchParams.set(i,t)}),e.href}}},,,,,,,,,,,,function(t,i,e){"use strict";var a=e(55),n=e(16);i.a={name:"app",components:{CalendarMaker:a.a},props:{fetchApi:{type:String,default:"/api/placeholders"},submitApi:{type:String,default:"/api/combine"}},data:function(){return{model:{}}},created:function(){var t=this;$.getJSON(n.a.wrapUrl(t.fetchApi)).then(function(i){t.model=i})},computed:{submitUrl:function(){return n.a.wrapUrl(this.submitApi)}},methods:{save:function(t){if(t.success&&t.url){var i=document.createElement("a");i.href=t.url,i.target="_blank",i.click()}else!t.success&&t.error?alert(t.error):console.log(["saved",t])}}}},function(t,i,e){"use strict";var a=e(58),n=e(15);i.a={name:"calendar-maker",mixins:[n.a],components:{Avatar:a.a},props:{model:{type:Object,required:!0},submitApi:{type:String,required:!0}},created:function(){window.calendarMaker=this},data:function(){return{originalAvatars:[],avatars:[],currentIndex:0,ratio:1,ratioWidth:1,ratioHeight:1,ratioRadius:1}},computed:{myCroppa:function(){return this.avatars[this.currentIndex]&&this.avatars[this.currentIndex].entry}},methods:{init:function(t,i){this.avatars[i].entry=t},click:function(t,i){this.currentIndex=i},rotate:function(){this.myCroppa&&this.myCroppa.rotate()},flipX:function(){this.myCroppa&&this.myCroppa.flipX()},flipY:function(){this.myCroppa&&this.myCroppa.flipY()},chooseFile:function(){this.myCroppa&&this.myCroppa.chooseFile()},upload:function(t){var i=this.avatars[this.currentIndex],e=new FormData;e.append("file",t),e.append("id",i.id),$.ajax({url:"https://wx.xiaoledingzhi.com/index.php/product/save_vue_image",data:e,type:"POST",processData:!1,contentType:!1,beforeSend:function(){$(".js_vue_alert").show(),$(".js_vue_alert_content").text("更换图片正在保存中！")},success:function(t){$(".js_vue_alert").hide()}})},save:function(){var t=this;return new Promise(function(i,e){var a=t,n=a.submitApi,o=a.avatars,r=a.ratioWidth,s=a.ratioHeight,h=a.ratioRadius,l=a.originalAvatars,c=new FormData,u=o.map(function(t){return t.entry&&t.entry.promisedBlob("image/png",1)});c.append("ratioWidth",r),c.append("ratioHeight",s),console.log(h);var d=[];Promise.all(u).then(function(t){var o=!0;if(t.forEach(function(t,i){if(t){var e=l[i],a="img"+i;c.append(a,t),d.push(e)}else o=!1}),c.append("avatares",JSON.stringify(d)),o)$.ajax({url:n,type:"POST",cache:!1,data:c,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).then(function(t){a.$emit("save",t),i(t)},function(t){e({success:!1,error:t})});else{var r={success:!1,error:"请上传所有需要的图片"};a.$emit("save",r),e(r)}})})}},watch:{originalAvatars:function(t,i){var e=this.ratioWidth,a=this.ratioHeight;this.avatars=t.map(function(t){return{image:t.image,width:Math.round(t.width*e),height:Math.round(t.height*a),x:Math.round(t.x*e)+"px",y:Math.round(t.y*a)+"px",radius:t.radius*e,id:t.id}})}}}},function(t,i,e){"use strict";var a=e(59),n=e.n(a),o=e(60);e.n(o);Vue.use(n.a),i.a={name:"xiaole-avatar",props:{width:{type:Number,default:100},height:{type:Number,default:100},radius:{type:Number,default:0},ratio:{type:Number,default:1},image:{type:String}},data:function(){return{myCroppa:{},placeholder:"选择一张图片",placeholderFontSize:0,disabled:!1,preventWhiteSpace:!0,disablePinchToZoom:!1,showRemoveButton:!1,withInitialImage:!0,disableClickToChoose:!0,isClick:!1}},mounted:function(){$(".js_img_effect_file").each(function(){var t=$(this),i=t.attr("radius");t.css("border-radius",i+"px")})},watch:{withInitialImage:function(){this.refresh()},image:function(t){console.log(["xxxx",t])}},methods:{touchstart:function(){this.isClick=!0},touchmove:function(){this.isClick=!1},touchend:function(){this.isClick&&(this.$emit("click",this.myCroppa),this.isClick=!1)},click:function(){this.$emit("click",this.myCroppa)},init:function(){this.$emit("init",this.myCroppa)},refresh:function(){this.myCroppa.refresh()},remove:function(){this.myCroppa.remove()},zoomIn:function(){this.myCroppa.zoomIn()},moveUp:function(){this.myCroppa.moveUpwards(5)},handleCroppaFileChoose:function(t){this.$emit("uploadfile",t)}}}},,,,,,,,,,,,,,,,,,,,,,,function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e(54);new Vue({components:{"xiaole-maker":a.a}}).$mount(".calendar-maker")},function(t,i,e){"use strict";var a=e(28),n=e(64),o=e(1),r=o(a.a,n.a,!1,null,null,null);i.a=r.exports},function(t,i,e){"use strict";function a(t){e(56)}var n=e(29),o=e(63),r=e(1),s=a,h=r(n.a,o.a,!1,s,"data-v-efcbe1f2",null);i.a=h.exports},function(t,i,e){var a=e(57);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(4)("39d001ed",a,!0,{})},function(t,i,e){i=t.exports=e(3)(!1),i.push([t.i,".img_effect[data-v-efcbe1f2]{margin:0 10px}.img_effect .img_box[data-v-efcbe1f2]{position:relative;width:100%}.img_effect .img_box .img_effect_bg[data-v-efcbe1f2]{display:block;width:100%}.img_effect .img_box .img_effect_file[data-v-efcbe1f2]{position:absolute;overflow:hidden;border:1px solid transparent}.img_effect .img_box .img_effect_file.on[data-v-efcbe1f2]{border:1px solid #fb5d5a}.img_effect .img_box .img_effect_file img[data-v-efcbe1f2]{position:absolute}",""])},function(t,i,e){"use strict";var a=e(30),n=e(62),o=e(1),r=o(a.a,n.a,!1,null,null,null);i.a=r.exports},function(t,i,e){(function(i){!function(i,e){t.exports=e()}(0,function(){"use strict";function t(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var e=("undefined"!=typeof window?window:void 0!==i||"undefined"!=typeof self&&self,function(t,i){return i={exports:{}},t(i,i.exports),i.exports}(function(t,i){!function(i,e){t.exports=e()}(0,function(){function t(t,i,e,a,n,o){if(!/^[1-8]$/.test(i))throw new Error("orientation should be [1-8]");null==e&&(e=0),null==a&&(a=0),null==n&&(n=t.width),null==o&&(o=t.height);var r=document.createElement("canvas"),s=r.getContext("2d");switch(r.width=n,r.height=o,s.save(),+i){case 1:break;case 2:s.translate(n,0),s.scale(-1,1);break;case 3:s.translate(n,o),s.rotate(1*Math.PI);break;case 4:s.translate(0,o),s.scale(1,-1);break;case 5:r.width=o,r.height=n,s.rotate(.5*Math.PI),s.scale(1,-1);break;case 6:r.width=o,r.height=n,s.rotate(.5*Math.PI),s.translate(0,-o);break;case 7:r.width=o,r.height=n,s.rotate(1.5*Math.PI),s.translate(-n,o),s.scale(1,-1);break;case 8:r.width=o,r.height=n,s.translate(0,n),s.rotate(1.5*Math.PI)}return s.drawImage(t,e,a,n,o),s.restore(),r}return{drawImage:t}})})),a={onePointCoord:function(t,i){var e=i.canvas,a=i.quality,n=e.getBoundingClientRect(),o=t.clientX,r=t.clientY;return{x:(o-n.left)*a,y:(r-n.top)*a}},getPointerCoords:function(t,i){var e=void 0;return e=t.touches&&t.touches[0]?t.touches[0]:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0]:t,this.onePointCoord(e,i)},getPinchDistance:function(t,i){var e=t.touches[0],a=t.touches[1],n=this.onePointCoord(e,i),o=this.onePointCoord(a,i);return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))},getPinchCenterCoord:function(t,i){var e=t.touches[0],a=t.touches[1],n=this.onePointCoord(e,i),o=this.onePointCoord(a,i);return{x:(n.x+o.x)/2,y:(n.y+o.y)/2}},imageLoaded:function(t){return t.complete&&0!==t.naturalWidth},rAFPolyfill:function(){if("undefined"!=typeof document&&"undefined"!=typeof window){for(var t=0,i=["webkit","moz"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),a=Math.max(0,16.7-(e-t)),n=window.setTimeout(function(){i(e+a)},a);return t=e+a,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}}},toBlobPolyfill:function(){if("undefined"!=typeof document&&"undefined"!=typeof window&&HTMLCanvasElement){var t,i,e;HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(a,n,o){t=atob(this.toDataURL(n,o).split(",")[1]),i=t.length,e=new Uint8Array(i);for(var r=0;r<i;r++)e[r]=t.charCodeAt(r);a(new Blob([e],{type:n||"image/png"}))}})}},eventHasFile:function(t){var i=t.dataTransfer||t.originalEvent.dataTransfer;if(i.types)for(var e=0,a=i.types.length;e<a;e++)if("Files"==i.types[e])return!0;return!1},getFileOrientation:function(t){var i=new DataView(t);if(65496!=i.getUint16(0,!1))return-2;for(var e=i.byteLength,a=2;a<e;){var n=i.getUint16(a,!1);if(a+=2,65505==n){if(1165519206!=i.getUint32(a+=2,!1))return-1;var o=18761==i.getUint16(a+=6,!1);a+=i.getUint32(a+4,o);var r=i.getUint16(a,o);a+=2;for(var s=0;s<r;s++)if(274==i.getUint16(a+12*s,o))return i.getUint16(a+12*s+8,o)}else{if(65280!=(65280&n))break;a+=i.getUint16(a,!1)}}return-1},parseDataUrl:function(t){return/^data:([^;]+)?(;base64)?,(.*)/gim.exec(t)[3]},base64ToArrayBuffer:function(t){for(var i=atob(t),e=i.length,a=new Uint8Array(e),n=0;n<e;n++)a[n]=i.charCodeAt(n);return a.buffer},getRotatedImage:function(t,i){var a=e.drawImage(t,i),n=new Image;return n.src=a.toDataURL(),n},flipX:function(t){return t%2==0?t-1:t+1},flipY:function(t){return{1:4,4:1,2:3,3:2,5:8,8:5,6:7,7:6}[t]},rotate90:function(t){return{1:6,2:7,3:8,4:5,5:2,6:3,7:4,8:1}[t]},numberValid:function(t){return"number"==typeof t&&!isNaN(t)}};Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};var n=String;"undefined"!=typeof window&&window.Image&&(n=[String,Image]);var o={value:Object,width:{type:Number,default:200,validator:function(t){return t>0}},height:{type:Number,default:200,validator:function(t){return t>0}},placeholder:{type:String,default:"Choose an image"},placeholderColor:{default:"#606060"},placeholderFontSize:{type:Number,default:0,validator:function(t){return t>=0}},canvasColor:{default:"transparent"},quality:{type:Number,default:2,validator:function(t){return t>0}},zoomSpeed:{default:3,type:Number,validator:function(t){return t>0}},accept:String,fileSizeLimit:{type:Number,default:0,validator:function(t){return t>=0}},disabled:Boolean,disableDragAndDrop:Boolean,disableClickToChoose:Boolean,disableDragToMove:Boolean,disableScrollToZoom:Boolean,disablePinchToZoom:Boolean,disableRotation:Boolean,reverseScrollToZoom:Boolean,preventWhiteSpace:Boolean,showRemoveButton:{type:Boolean,default:!0},removeButtonColor:{type:String,default:"red"},removeButtonSize:{type:Number},initialImage:n,initialSize:{type:String,default:"cover",validator:function(t){return"cover"===t||"contain"===t||"natural"===t}},initialPosition:{type:String,default:"center",validator:function(t){var i=["center","top","bottom","left","right"];return t.split(" ").every(function(t){return i.indexOf(t)>=0})||/^-?\d+% -?\d+%$/.test(t)}},inputAttrs:Object,showLoading:Boolean,loadingSize:{type:Number,default:20},loadingColor:{type:String,default:"#606060"},replaceDrop:Boolean,passive:Boolean,imageBorderRadius:{type:[Number,String],default:0},autoSizing:Boolean,videoEnabled:Boolean},r={INIT_EVENT:"init",FILE_CHOOSE_EVENT:"file-choose",FILE_SIZE_EXCEED_EVENT:"file-size-exceed",FILE_TYPE_MISMATCH_EVENT:"file-type-mismatch",NEW_IMAGE_EVENT:"new-image",NEW_IMAGE_DRAWN_EVENT:"new-image-drawn",IMAGE_REMOVE_EVENT:"image-remove",MOVE_EVENT:"move",ZOOM_EVENT:"zoom",DRAW_EVENT:"draw",INITIAL_IMAGE_LOADED_EVENT:"initial-image-loaded",LOADING_START_EVENT:"loading-start",LOADING_END_EVENT:"loading-end"},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=["imgData","img","imgSet","originalImage","naturalHeight","naturalWidth","orientation","scaleRatio"],l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"wrapper",class:"croppa-container "+(t.img?"croppa--has-target":"")+" "+(t.passive?"croppa--passive":"")+" "+(t.disabled?"croppa--disabled":"")+" "+(t.disableClickToChoose?"croppa--disabled-cc":"")+" "+(t.disableDragToMove&&t.disableScrollToZoom?"croppa--disabled-mz":"")+" "+(t.fileDraggedOver?"croppa--dropzone":""),on:{dragenter:function(i){i.stopPropagation(),i.preventDefault(),t._handleDragEnter(i)},dragleave:function(i){i.stopPropagation(),i.preventDefault(),t._handleDragLeave(i)},dragover:function(i){i.stopPropagation(),i.preventDefault(),t._handleDragOver(i)},drop:function(i){i.stopPropagation(),i.preventDefault(),t._handleDrop(i)}}},[e("input",t._b({ref:"fileInput",staticStyle:{height:"1px",width:"1px",overflow:"hidden","margin-left":"-99999px",position:"absolute"},attrs:{type:"file",accept:t.accept,disabled:t.disabled},on:{change:t._handleInputChange}},"input",t.inputAttrs)),e("div",{staticClass:"slots",staticStyle:{width:"0",height:"0",visibility:"hidden"}},[t._t("initial"),t._t("placeholder")],2),e("canvas",{ref:"canvas",on:{click:function(i){i.stopPropagation(),i.preventDefault(),t._handleClick(i)},dblclick:function(i){i.stopPropagation(),i.preventDefault(),t._handleDblClick(i)},touchstart:function(i){i.stopPropagation(),t._handlePointerStart(i)},mousedown:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerStart(i)},pointerstart:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerStart(i)},touchend:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerEnd(i)},touchcancel:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerEnd(i)},mouseup:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerEnd(i)},pointerend:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerEnd(i)},pointercancel:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerEnd(i)},touchmove:function(i){i.stopPropagation(),t._handlePointerMove(i)},mousemove:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerMove(i)},pointermove:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerMove(i)},pointerleave:function(i){i.stopPropagation(),i.preventDefault(),t._handlePointerLeave(i)},DOMMouseScroll:function(i){i.stopPropagation(),t._handleWheel(i)},wheel:function(i){i.stopPropagation(),t._handleWheel(i)},mousewheel:function(i){i.stopPropagation(),t._handleWheel(i)}}}),t.showRemoveButton&&t.img&&!t.passive?e("svg",{staticClass:"icon icon-remove",style:"top: -"+t.height/40+"px; right: -"+t.width/40+"px",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t.removeButtonSize||t.width/10,height:t.removeButtonSize||t.width/10},on:{click:t.remove}},[e("path",{attrs:{d:"M511.921231 0C229.179077 0 0 229.257846 0 512 0 794.702769 229.179077 1024 511.921231 1024 794.781538 1024 1024 794.702769 1024 512 1024 229.257846 794.781538 0 511.921231 0ZM732.041846 650.633846 650.515692 732.081231C650.515692 732.081231 521.491692 593.683692 511.881846 593.683692 502.429538 593.683692 373.366154 732.081231 373.366154 732.081231L291.761231 650.633846C291.761231 650.633846 430.316308 523.500308 430.316308 512.196923 430.316308 500.696615 291.761231 373.523692 291.761231 373.523692L373.366154 291.918769C373.366154 291.918769 503.453538 430.395077 511.881846 430.395077 520.349538 430.395077 650.515692 291.918769 650.515692 291.918769L732.041846 373.523692C732.041846 373.523692 593.447385 502.547692 593.447385 512.196923 593.447385 521.412923 732.041846 650.633846 732.041846 650.633846Z",fill:t.removeButtonColor}})]):t._e(),t.showLoading&&t.loading?e("div",{staticClass:"sk-fading-circle",style:t.loadingStyle},t._l(12,function(i){return e("div",{key:i,class:"sk-circle"+i+" sk-circle"},[e("div",{staticClass:"sk-circle-indicator",style:{backgroundColor:t.loadingColor}})])})):t._e(),t._t("default")],2)},staticRenderFns:[],model:{prop:"value",event:r.INIT_EVENT},props:o,data:function(){return{canvas:null,ctx:null,originalImage:null,img:null,video:null,dragging:!1,lastMovingCoord:null,imgData:{width:0,height:0,startX:0,startY:0},fileDraggedOver:!1,tabStart:0,scrolling:!1,pinching:!1,rotating:!1,pinchDistance:0,supportTouch:!1,pointerMoved:!1,pointerStartCoord:null,naturalWidth:0,naturalHeight:0,scaleRatio:null,orientation:1,userMetadata:null,imageSet:!1,currentPointerCoord:null,currentIsInitial:!1,loading:!1,realWidth:0,realHeight:0,chosenFile:null,useAutoSizing:!1}},computed:{outputWidth:function(){return(this.useAutoSizing?this.realWidth:this.width)*this.quality},outputHeight:function(){return(this.useAutoSizing?this.realHeight:this.height)*this.quality},computedPlaceholderFontSize:function(){return this.placeholderFontSize*this.quality},aspectRatio:function(){return this.naturalWidth/this.naturalHeight},loadingStyle:function(){return{width:this.loadingSize+"px",height:this.loadingSize+"px",right:"15px",bottom:"10px"}}},mounted:function(){var t=this;this._initialize(),a.rAFPolyfill(),a.toBlobPolyfill(),this.supportDetection().basic||console.warn("Your browser does not support vue-croppa functionality."),this.passive&&this.$watch("value._data",function(i){var e=!1;if(i){for(var a in i)if(h.indexOf(a)>=0){var n=i[a];n!==t[a]&&(t.$set(t,a,n),e=!0)}e&&(t.img?t.$nextTick(function(){t._draw()}):t.remove())}},{deep:!0}),this.useAutoSizing=!!(this.autoSizing&&this.$refs.wrapper&&getComputedStyle),this.useAutoSizing&&this._autoSizingInit()},beforeDestroy:function(){this.useAutoSizing&&this._autoSizingRemove()},watch:{outputWidth:function(){this.onDimensionChange()},outputHeight:function(){this.onDimensionChange()},canvasColor:function(){this.img?this._draw():this._setPlaceholders()},imageBorderRadius:function(){this.img&&this._draw()},placeholder:function(){this.img||this._setPlaceholders()},placeholderColor:function(){this.img||this._setPlaceholders()},computedPlaceholderFontSize:function(){this.img||this._setPlaceholders()},preventWhiteSpace:function(t){t&&(this.imageSet=!1),this._placeImage()},scaleRatio:function(t,i){if(!this.passive&&this.img&&a.numberValid(t)){var e=1;a.numberValid(i)&&0!==i&&(e=t/i);var n=this.currentPointerCoord||{x:this.imgData.startX+this.imgData.width/2,y:this.imgData.startY+this.imgData.height/2};if(this.imgData.width=this.naturalWidth*t,this.imgData.height=this.naturalHeight*t,!this.userMetadata&&this.imageSet&&!this.rotating){var o=(e-1)*(n.x-this.imgData.startX),r=(e-1)*(n.y-this.imgData.startY);this.imgData.startX=this.imgData.startX-o,this.imgData.startY=this.imgData.startY-r}this.preventWhiteSpace&&(this._preventZoomingToWhiteSpace(),this._preventMovingToWhiteSpace())}},"imgData.width":function(t,i){a.numberValid(t)&&(this.scaleRatio=t/this.naturalWidth,this.hasImage()&&Math.abs(t-i)>1e-5*t&&(this.emitEvent(r.ZOOM_EVENT),this._draw()))},"imgData.height":function(t){a.numberValid(t)&&(this.scaleRatio=t/this.naturalHeight)},"imgData.startX":function(t){this.hasImage()&&this.$nextTick(this._draw)},"imgData.startY":function(t){this.hasImage()&&this.$nextTick(this._draw)},loading:function(t){this.passive||(t?this.emitEvent(r.LOADING_START_EVENT):this.emitEvent(r.LOADING_END_EVENT))},autoSizing:function(t){this.useAutoSizing=!!(this.autoSizing&&this.$refs.wrapper&&getComputedStyle),t?this._autoSizingInit():this._autoSizingRemove()}},methods:{emitEvent:function(){this.$emit.apply(this,arguments)},getCanvas:function(){return this.canvas},getContext:function(){return this.ctx},getChosenFile:function(){return this.chosenFile||this.$refs.fileInput.files[0]},move:function(t){if(t&&!this.passive){var i=this.imgData.startX,e=this.imgData.startY;this.imgData.startX+=t.x,this.imgData.startY+=t.y,this.preventWhiteSpace&&this._preventMovingToWhiteSpace(),this.imgData.startX===i&&this.imgData.startY===e||(this.emitEvent(r.MOVE_EVENT),this._draw())}},moveUpwards:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.move({x:0,y:-t})},moveDownwards:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.move({x:0,y:t})},moveLeftwards:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.move({x:-t,y:0})},moveRightwards:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.move({x:t,y:0})},zoom:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.passive){var e=this.zoomSpeed*i,a=1e-5*this.outputWidth*e,n=1;t?n=1+a:this.imgData.width>10&&(n=1-a),this.scaleRatio*=n}},zoomIn:function(){this.zoom(!0)},zoomOut:function(){this.zoom(!1)},rotate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.disableRotation||this.disabled||this.passive||(t=parseInt(t),(isNaN(t)||t>3||t<-3)&&(console.warn("Invalid argument for rotate() method. It should one of the integers from -3 to 3."),t=1),this._rotateByStep(t))},flipX:function(){this.disableRotation||this.disabled||this.passive||this._setOrientation(2)},flipY:function(){this.disableRotation||this.disabled||this.passive||this._setOrientation(4)},refresh:function(){this.$nextTick(this._initialize)},hasImage:function(){return!!this.imageSet},applyMetadata:function(t){if(t&&!this.passive){this.userMetadata=t;var i=t.orientation||this.orientation||1;this._setOrientation(i,!0)}},generateDataUrl:function(t,i){return this.hasImage()?this.canvas.toDataURL(t,i):""},generateBlob:function(t,i,e){if(!this.hasImage())return void t(null);this.canvas.toBlob(t,i,e)},promisedBlob:function(){for(var t=this,i=arguments.length,e=Array(i),a=0;a<i;a++)e[a]=arguments[a];return"undefined"==typeof Promise?void console.warn("No Promise support. Please add Promise polyfill if you want to use this method."):new Promise(function(i,a){try{t.generateBlob.apply(t,[function(t){i(t)}].concat(e))}catch(t){a(t)}})},getMetadata:function(){if(!this.hasImage())return{};var t=this.imgData;return{startX:t.startX,startY:t.startY,scale:this.scaleRatio,orientation:this.orientation}},supportDetection:function(){if("undefined"!=typeof window){var t=document.createElement("div");return{basic:window.requestAnimationFrame&&window.File&&window.FileReader&&window.FileList&&window.Blob,dnd:"ondragstart"in t&&"ondrop"in t}}},chooseFile:function(){this.passive||this.$refs.fileInput.click()},remove:function(){if(this.imageSet){this._setPlaceholders();var t=null!=this.img;this.originalImage=null,this.img=null,this.$refs.fileInput.value="",this.imgData={width:0,height:0,startX:0,startY:0},this.orientation=1,this.scaleRatio=null,this.userMetadata=null,this.imageSet=!1,this.chosenFile=null,this.video&&(this.video.pause(),this.video=null),t&&this.emitEvent(r.IMAGE_REMOVE_EVENT)}},addClipPlugin:function(t){if(this.clipPlugins||(this.clipPlugins=[]),!("function"==typeof t&&this.clipPlugins.indexOf(t)<0))throw Error("Clip plugins should be functions");this.clipPlugins.push(t)},emitNativeEvent:function(t){this.emitEvent(t.type,t)},_setContainerSize:function(){this.useAutoSizing&&(this.realWidth=+getComputedStyle(this.$refs.wrapper).width.slice(0,-2),this.realHeight=+getComputedStyle(this.$refs.wrapper).height.slice(0,-2))},_autoSizingInit:function(){this._setContainerSize(),window.addEventListener("resize",this._setContainerSize)},_autoSizingRemove:function(){this._setContainerSize(),window.removeEventListener("resize",this._setContainerSize)},_initialize:function(){this.canvas=this.$refs.canvas,this._setSize(),this.canvas.style.backgroundColor=this.canvasColor&&"default"!=this.canvasColor?"string"==typeof this.canvasColor?this.canvasColor:"":"transparent",this.ctx=this.canvas.getContext("2d"),this.ctx.mozImageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.webkitImageSmoothingEnabled=!0,this.ctx.msImageSmoothingEnabled=!0,this.ctx.imageSmoothingEnabled=!0,this.originalImage=null,this.img=null,this.$refs.fileInput.value="",this.imageSet=!1,this.chosenFile=null,this._setInitial(),this.passive||this.emitEvent(r.INIT_EVENT,this)},_setSize:function(){this.canvas.width=this.outputWidth,this.canvas.height=this.outputHeight,this.canvas.style.width=(this.useAutoSizing?this.realWidth:this.width)+"px",this.canvas.style.height=(this.useAutoSizing?this.realHeight:this.height)+"px"},_rotateByStep:function(t){var i=1;switch(t){case 1:i=6;break;case 2:i=3;break;case 3:case-1:i=8;break;case-2:i=3;break;case-3:i=6}this._setOrientation(i)},_setImagePlaceholder:function(){var t=this,i=void 0;if(this.$slots.placeholder&&this.$slots.placeholder[0]){var e=this.$slots.placeholder[0],n=e.tag,o=e.elm;"img"==n&&o&&(i=o)}if(i){var r=function(){t.ctx.drawImage(i,0,0,t.outputWidth,t.outputHeight)};a.imageLoaded(i)?r():i.onload=r}},_setTextPlaceholder:function(){var t=this.ctx;t.textBaseline="middle",t.textAlign="center";var i=this.outputWidth*(2/3)/this.placeholder.length,e=this.computedPlaceholderFontSize&&0!=this.computedPlaceholderFontSize?this.computedPlaceholderFontSize:i;t.font=e+"px sans-serif",t.fillStyle=this.placeholderColor&&"default"!=this.placeholderColor?this.placeholderColor:"#606060",t.fillText(this.placeholder,this.outputWidth/2,this.outputHeight/2)},_setPlaceholders:function(){this._paintBackground(),this._setImagePlaceholder(),this._setTextPlaceholder()},_setInitial:function(){var t=this,i=void 0,e=void 0;if(this.$slots.initial&&this.$slots.initial[0]){var n=this.$slots.initial[0],o=n.tag,r=n.elm;"img"==o&&r&&(e=r)}if(this.initialImage&&"string"==typeof this.initialImage?(i=this.initialImage,e=new Image,/^data:/.test(i)||/^blob:/.test(i)||e.setAttribute("crossOrigin","anonymous"),e.src=i):"object"===s(this.initialImage)&&this.initialImage instanceof Image&&(e=this.initialImage),!i&&!e)return void this._setPlaceholders();this.currentIsInitial=!0,a.imageLoaded(e)?this._onload(e,+e.dataset.exifOrientation,!0):(this.loading=!0,e.onload=function(){t._onload(e,+e.dataset.exifOrientation,!0)},e.onerror=function(){t._setPlaceholders()})},_onload:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments[2];this.imageSet&&this.remove(),this.originalImage=t,this.img=t,isNaN(i)&&(i=1),this._setOrientation(i),e&&this.emitEvent(r.INITIAL_IMAGE_LOADED_EVENT)},_onVideoLoad:function(t,i){var e=this;this.video=t;var a=document.createElement("canvas"),n=t.videoWidth,o=t.videoHeight;a.width=n,a.height=o;var r=a.getContext("2d");this.loading=!1;var s=function(t){if(e.video){r.drawImage(e.video,0,0,n,o);var i=new Image;i.src=a.toDataURL(),i.onload=function(){e.img=i,t?e._placeImage():e._draw()}}};s(!0);var h=function t(){e.$nextTick(function(){s(),!e.video||e.video.ended||e.video.paused||requestAnimationFrame(t)})};this.video.addEventListener("play",function(){requestAnimationFrame(h)})},_handleClick:function(t){this.emitNativeEvent(t),this.hasImage()||this.disableClickToChoose||this.disabled||this.supportTouch||this.passive||this.chooseFile()},_handleDblClick:function(t){if(this.emitNativeEvent(t),this.videoEnabled&&this.video)return void(this.video.paused||this.video.ended?this.video.play():this.video.pause())},_handleInputChange:function(){var t=this.$refs.fileInput;if(t.files.length&&!this.passive){var i=t.files[0];this._onNewFileIn(i)}},_onNewFileIn:function(t){var i=this;if(this.currentIsInitial=!1,this.loading=!0,this.emitEvent(r.FILE_CHOOSE_EVENT,t),this.chosenFile=t,!this._fileSizeIsValid(t))return this.loading=!1,this.emitEvent(r.FILE_SIZE_EXCEED_EVENT,t),!1;if(!this._fileTypeIsValid(t)){this.loading=!1,this.emitEvent(r.FILE_TYPE_MISMATCH_EVENT,t);t.type||t.name.toLowerCase().split(".").pop();return!1}if("undefined"!=typeof window&&void 0!==window.FileReader){var e=new FileReader;e.onload=function(e){var n=e.target.result,o=a.parseDataUrl(n);if(/^video/.test(t.type)){var s=document.createElement("video");s.src=n,n=null,s.readyState>=s.HAVE_FUTURE_DATA?i._onVideoLoad(s):s.addEventListener("canplay",function(){console.log("can play event"),i._onVideoLoad(s)},!1)}else{var h=1;try{h=a.getFileOrientation(a.base64ToArrayBuffer(o))}catch(t){}h<1&&(h=1);var l=new Image;l.src=n,n=null,l.onload=function(){i._onload(l,h),i.emitEvent(r.NEW_IMAGE_EVENT)}}},e.readAsDataURL(t)}},_fileSizeIsValid:function(t){return!!t&&(!this.fileSizeLimit||0==this.fileSizeLimit||t.size<this.fileSizeLimit)},_fileTypeIsValid:function(t){if(!(this.videoEnabled&&/^video/.test(t.type)&&document.createElement("video").canPlayType(t.type)||/^image/.test(t.type)))return!1;if(!this.accept)return!0;for(var i=this.accept,e=i.replace(/\/.*$/,""),a=i.split(","),n=0,o=a.length;n<o;n++){var r=a[n],s=r.trim();if("."==s.charAt(0)){if(t.name.toLowerCase().split(".").pop()===s.toLowerCase().slice(1))return!0}else if(/\/\*$/.test(s)){var h=t.type.replace(/\/.*$/,"");if(h===e)return!0}else if(t.type===r)return!0}return!1},_placeImage:function(t){if(this.img){var i=this.imgData;if(this.naturalWidth=this.img.naturalWidth,this.naturalHeight=this.img.naturalHeight,i.startX=a.numberValid(i.startX)?i.startX:0,i.startY=a.numberValid(i.startY)?i.startY:0,this.preventWhiteSpace?this._aspectFill():this.imageSet?(this.imgData.width=this.naturalWidth*this.scaleRatio,this.imgData.height=this.naturalHeight*this.scaleRatio):"contain"==this.initialSize?this._aspectFit():"natural"==this.initialSize?this._naturalSize():this._aspectFill(),!this.imageSet&&(/top/.test(this.initialPosition)?i.startY=0:/bottom/.test(this.initialPosition)&&(i.startY=this.outputHeight-i.height),/left/.test(this.initialPosition)?i.startX=0:/right/.test(this.initialPosition)&&(i.startX=this.outputWidth-i.width),/^-?\d+% -?\d+%$/.test(this.initialPosition))){var e=/^(-?\d+)% (-?\d+)%$/.exec(this.initialPosition),n=+e[1]/100,o=+e[2]/100;i.startX=n*(this.outputWidth-i.width),i.startY=o*(this.outputHeight-i.height)}t&&this._applyMetadata(),t&&this.preventWhiteSpace?this.zoom(!1,0):(this.move({x:0,y:0}),this._draw())}},_aspectFill:function(){var t=this.naturalWidth,i=this.naturalHeight,e=this.outputWidth/this.outputHeight,a=void 0;this.aspectRatio>e?(a=i/this.outputHeight,this.imgData.width=t/a,this.imgData.height=this.outputHeight,this.imgData.startX=-(this.imgData.width-this.outputWidth)/2,this.imgData.startY=0):(a=t/this.outputWidth,this.imgData.height=i/a,this.imgData.width=this.outputWidth,this.imgData.startY=-(this.imgData.height-this.outputHeight)/2,this.imgData.startX=0)},_aspectFit:function(){var t=this.naturalWidth,i=this.naturalHeight,e=this.outputWidth/this.outputHeight,a=void 0;this.aspectRatio>e?(a=t/this.outputWidth,this.imgData.height=i/a,this.imgData.width=this.outputWidth,this.imgData.startY=-(this.imgData.height-this.outputHeight)/2,this.imgData.startX=0):(a=i/this.outputHeight,this.imgData.width=t/a,this.imgData.height=this.outputHeight,this.imgData.startX=-(this.imgData.width-this.outputWidth)/2,this.imgData.startY=0)},_naturalSize:function(){var t=this.naturalWidth,i=this.naturalHeight;this.imgData.width=t,this.imgData.height=i,this.imgData.startX=-(this.imgData.width-this.outputWidth)/2,this.imgData.startY=-(this.imgData.height-this.outputHeight)/2},_handlePointerStart:function(t){if(this.emitNativeEvent(t),!this.passive){this.supportTouch=!0,this.pointerMoved=!1;var i=a.getPointerCoords(t,this);if(this.pointerStartCoord=i,!this.disabled){if(!this.hasImage()&&!this.disableClickToChoose)return void(this.tabStart=(new Date).valueOf());if(!(t.which&&t.which>1)){if(!t.touches||1===t.touches.length){this.dragging=!0,this.pinching=!1;var e=a.getPointerCoords(t,this);this.lastMovingCoord=e}t.touches&&2===t.touches.length&&!this.disablePinchToZoom&&(this.dragging=!1,this.pinching=!0,this.pinchDistance=a.getPinchDistance(t,this));for(var n=["mouseup","touchend","touchcancel","pointerend","pointercancel"],o=0,r=n.length;o<r;o++){var s=n[o];document.addEventListener(s,this._handlePointerEnd)}}}}},_handlePointerEnd:function(t){if(this.emitNativeEvent(t),!this.passive){var i=0;if(this.pointerStartCoord){var e=a.getPointerCoords(t,this);i=Math.sqrt(Math.pow(e.x-this.pointerStartCoord.x,2)+Math.pow(e.y-this.pointerStartCoord.y,2))||0}if(!this.disabled){if(!this.hasImage()&&!this.disableClickToChoose){var n=(new Date).valueOf();return i<100&&n-this.tabStart<500&&this.supportTouch&&this.chooseFile(),void(this.tabStart=0)}this.dragging=!1,this.pinching=!1,this.pinchDistance=0,this.lastMovingCoord=null,this.pointerMoved=!1,this.pointerStartCoord=null}}},_handlePointerMove:function(t){if(this.emitNativeEvent(t),!this.passive&&(this.pointerMoved=!0,this.hasImage())){var i=a.getPointerCoords(t,this);if(this.currentPointerCoord=i,!this.disabled&&!this.disableDragToMove){if(t.preventDefault(),!t.touches||1===t.touches.length){if(!this.dragging)return;this.lastMovingCoord&&this.move({x:i.x-this.lastMovingCoord.x,y:i.y-this.lastMovingCoord.y}),this.lastMovingCoord=i}if(t.touches&&2===t.touches.length&&!this.disablePinchToZoom){if(!this.pinching)return;var e=a.getPinchDistance(t,this),n=e-this.pinchDistance;this.zoom(n>0,1),this.pinchDistance=e}}}},_handlePointerLeave:function(t){this.emitNativeEvent(t),this.passive||(this.currentPointerCoord=null)},_handleWheel:function(t){var i=this;this.emitNativeEvent(t),this.passive||this.disabled||this.disableScrollToZoom||!this.hasImage()||(t.preventDefault(),this.scrolling=!0,t.wheelDelta<0||t.deltaY>0||t.detail>0?this.zoom(this.reverseScrollToZoom):(t.wheelDelta>0||t.deltaY<0||t.detail<0)&&this.zoom(!this.reverseScrollToZoom),this.$nextTick(function(){i.scrolling=!1}))},_handleDragEnter:function(t){this.emitNativeEvent(t),this.passive||this.disabled||this.disableDragAndDrop||!a.eventHasFile(t)||this.hasImage()&&!this.replaceDrop||(this.fileDraggedOver=!0)},_handleDragLeave:function(t){this.emitNativeEvent(t),this.passive||this.fileDraggedOver&&a.eventHasFile(t)&&(this.fileDraggedOver=!1)},_handleDragOver:function(t){this.emitNativeEvent(t)},_handleDrop:function(t){if(this.emitNativeEvent(t),!this.passive&&this.fileDraggedOver&&a.eventHasFile(t)&&(!this.hasImage()||this.replaceDrop)){this.fileDraggedOver=!1;var i=void 0,e=t.dataTransfer;if(e){if(e.items)for(var n=0,o=e.items.length;n<o;n++){var r=e.items[n];if("file"==r.kind){i=r.getAsFile();break}}else i=e.files[0];i&&this._onNewFileIn(i)}}},_preventMovingToWhiteSpace:function(){this.imgData.startX>0&&(this.imgData.startX=0),this.imgData.startY>0&&(this.imgData.startY=0),this.outputWidth-this.imgData.startX>this.imgData.width&&(this.imgData.startX=-(this.imgData.width-this.outputWidth)),this.outputHeight-this.imgData.startY>this.imgData.height&&(this.imgData.startY=-(this.imgData.height-this.outputHeight))},_preventZoomingToWhiteSpace:function(){this.imgData.width<this.outputWidth&&(this.scaleRatio=this.outputWidth/this.naturalWidth),this.imgData.height<this.outputHeight&&(this.scaleRatio=this.outputHeight/this.naturalHeight)},_setOrientation:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=arguments[1],n=e;if(i>1||n){if(!this.img)return;this.rotating=!0;var o=a.getRotatedImage(n?this.originalImage:this.img,i);o.onload=function(){t.img=o,t._placeImage(e)}}else this._placeImage(e);this.orientation=2==i?a.flipX(this.orientation):4==i?a.flipY(this.orientation):6==i?a.rotate90(this.orientation):3==i?a.rotate90(a.rotate90(this.orientation)):8==i?a.rotate90(a.rotate90(a.rotate90(this.orientation))):i,n&&(this.orientation=i)},_paintBackground:function(){var t=this.canvasColor&&"default"!=this.canvasColor?this.canvasColor:"transparent";this.ctx.fillStyle=t,this.ctx.clearRect(0,0,this.outputWidth,this.outputHeight),this.ctx.fillRect(0,0,this.outputWidth,this.outputHeight)},_draw:function(){var t=this;this.$nextTick(function(){"undefined"!=typeof window&&window.requestAnimationFrame?requestAnimationFrame(t._drawFrame):t._drawFrame()})},_drawFrame:function(){if(this.img){this.loading=!1;var t=this.ctx,i=this.imgData,e=i.startX,a=i.startY,n=i.width,o=i.height;this._paintBackground(),t.drawImage(this.img,e,a,n,o),this.preventWhiteSpace&&this._clip(this._createContainerClipPath),this.emitEvent(r.DRAW_EVENT,t),this.imageSet||(this.imageSet=!0,this.emitEvent(r.NEW_IMAGE_DRAWN_EVENT)),this.rotating=!1}},_clipPathFactory:function(t,i,e,a){var n=this.ctx,o="number"==typeof this.imageBorderRadius?this.imageBorderRadius:isNaN(Number(this.imageBorderRadius))?0:Number(this.imageBorderRadius);n.beginPath(),n.moveTo(t+o,i),n.lineTo(t+e-o,i),n.quadraticCurveTo(t+e,i,t+e,i+o),n.lineTo(t+e,i+a-o),n.quadraticCurveTo(t+e,i+a,t+e-o,i+a),n.lineTo(t+o,i+a),n.quadraticCurveTo(t,i+a,t,i+a-o),n.lineTo(t,i+o),n.quadraticCurveTo(t,i,t+o,i),n.closePath()},_createContainerClipPath:function(){var t=this;this._clipPathFactory(0,0,this.outputWidth,this.outputHeight),this.clipPlugins&&this.clipPlugins.length&&this.clipPlugins.forEach(function(i){i(t.ctx,0,0,t.outputWidth,t.outputHeight)})},_clip:function(t){var i=this.ctx;i.save(),i.fillStyle="#fff",i.globalCompositeOperation="destination-in",t(),i.fill(),i.restore()},_applyMetadata:function(){var t=this;if(this.userMetadata){var i=this.userMetadata,e=i.startX,n=i.startY,o=i.scale;a.numberValid(e)&&(this.imgData.startX=e),a.numberValid(n)&&(this.imgData.startY=n),a.numberValid(o)&&(this.scaleRatio=o),this.$nextTick(function(){t.userMetadata=null})}},onDimensionChange:function(){this.img?(this.preventWhiteSpace&&(this.imageSet=!1),this._setSize(),this._placeImage()):this._initialize()}}},c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var i={},e=0;e<10;e++)i["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(i).map(function(t){return i[t]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(t){a[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(t){return!1}}()?Object.assign:function(i,e){for(var a,n,o=t(i),r=1;r<arguments.length;r++){a=Object(arguments[r]);for(var s in a)u.call(a,s)&&(o[s]=a[s]);if(c){n=c(a);for(var h=0;h<n.length;h++)d.call(a,n[h])&&(o[n[h]]=a[n[h]])}}return o},f={componentName:"croppa"};return{install:function(t,i){i=p({},f,i);var e=Number(t.version.split(".")[0]);if(e<2)throw new Error("vue-croppa supports vue version 2.0 and above. You are using Vue@"+e+". Please upgrade to the latest version of Vue.");var a=i.componentName||"croppa";t.component(a,l)},component:l}})}).call(i,e(14))},function(t,i,e){var a=e(61);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(4)("7c8edd56",a,!0,{})},function(t,i,e){i=t.exports=e(3)(!1),i.push([t.i,".sk-fading-circle{position:absolute}.sk-fading-circle .sk-circle{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle .sk-circle .sk-circle-indicator{display:block;margin:0 auto;width:15%;height:15%;border-radius:100%;-webkit-animation:sk-circleFadeDelay 1s infinite ease-in-out both;animation:sk-circleFadeDelay 1s infinite ease-in-out both}.sk-fading-circle .sk-circle2{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.sk-fading-circle .sk-circle3{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.sk-fading-circle .sk-circle4{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.sk-fading-circle .sk-circle5{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.sk-fading-circle .sk-circle6{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.sk-fading-circle .sk-circle7{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.sk-fading-circle .sk-circle8{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.sk-fading-circle .sk-circle9{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.sk-fading-circle .sk-circle10{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.sk-fading-circle .sk-circle11{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.sk-fading-circle .sk-circle12{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.sk-fading-circle .sk-circle2 .sk-circle-indicator{-webkit-animation-delay:-.91667s;animation-delay:-.91667s}.sk-fading-circle .sk-circle3 .sk-circle-indicator{-webkit-animation-delay:-.83333s;animation-delay:-.83333s}.sk-fading-circle .sk-circle4 .sk-circle-indicator{-webkit-animation-delay:-.75s;animation-delay:-.75s}.sk-fading-circle .sk-circle5 .sk-circle-indicator{-webkit-animation-delay:-.66667s;animation-delay:-.66667s}.sk-fading-circle .sk-circle6 .sk-circle-indicator{-webkit-animation-delay:-.58333s;animation-delay:-.58333s}.sk-fading-circle .sk-circle7 .sk-circle-indicator{-webkit-animation-delay:-.5s;animation-delay:-.5s}.sk-fading-circle .sk-circle8 .sk-circle-indicator{-webkit-animation-delay:-.41667s;animation-delay:-.41667s}.sk-fading-circle .sk-circle9 .sk-circle-indicator{-webkit-animation-delay:-.33333s;animation-delay:-.33333s}.sk-fading-circle .sk-circle10 .sk-circle-indicator{-webkit-animation-delay:-.25s;animation-delay:-.25s}.sk-fading-circle .sk-circle11 .sk-circle-indicator{-webkit-animation-delay:-.16667s;animation-delay:-.16667s}.sk-fading-circle .sk-circle12 .sk-circle-indicator{-webkit-animation-delay:-83.33ms;animation-delay:-83.33ms}@-webkit-keyframes sk-circleFadeDelay{0%,39%,to{opacity:0}40%{opacity:1}}@keyframes sk-circleFadeDelay{0%,39%,to{opacity:0}40%{opacity:1}}.croppa-container{display:inline-block;cursor:pointer;position:relative;font-size:0;-ms-flex-item-align:start;align-self:flex-start;background-color:#e6e6e6}.croppa-container,.croppa-container canvas{-webkit-transition:all .3s;transition:all .3s}.croppa-container:hover{opacity:.7}.croppa-container.croppa--dropzone{-webkit-box-shadow:inset 0 0 10px #333;box-shadow:inset 0 0 10px #333}.croppa-container.croppa--dropzone canvas{opacity:.5}.croppa-container.croppa--disabled-cc:hover,.croppa-container.croppa--disabled:hover,.croppa-container.croppa--has-target:hover,.croppa-container.croppa--passive:hover{opacity:1}.croppa-container.croppa--disabled-cc{cursor:default}.croppa-container.croppa--has-target{cursor:move}.croppa-container.croppa--has-target.croppa--disabled-mz{cursor:default}.croppa-container.croppa--disabled{cursor:not-allowed}.croppa-container.croppa--passive{cursor:default}.croppa-container svg.icon-remove{position:absolute;background:#fff;border-radius:50%;-webkit-filter:drop-shadow(-2px 2px 2px rgba(0,0,0,.7));filter:drop-shadow(-2px 2px 2px rgba(0,0,0,.7));z-index:10;cursor:pointer;border:2px solid #fff}",""])},function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement;return(t._self._c||i)("croppa",{staticClass:"img_effect_file js_img_effect_file",attrs:{width:+t.width,height:+t.height,radius:+t.radius,placeholder:t.placeholder,"placeholder-font-size":+t.placeholderFontSize,"canvas-color":"transparent",disabled:t.disabled,"prevent-white-space":t.preventWhiteSpace,"show-remove-button":t.showRemoveButton,"zoom-speed":1,"show-loading":!0,accept:"image/*",quality:t.ratio,"initial-image":t.image,"disable-click-to-choose":t.disableClickToChoose,"image-border-radius":0},on:{"file-choose":t.handleCroppaFileChoose,"file-size-exceed":t.handleCroppaFileSizeExceed,"file-type-mismatch":t.handleCroppaFileTypeMismatch,"image-remove":t.handleImageRemove,move:t.handleCroppaMove,zoom:t.handleCroppaZoom,"initial-image-loaded":t.imageLoaded,init:t.init,click:t.click,touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend},model:{value:t.myCroppa,callback:function(i){t.myCroppa=i},expression:"myCroppa"}})},n=[],o={render:a,staticRenderFns:n};i.a=o},function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"img_effect clearfix"},[e("div",{staticClass:"img_box"},[e("img",{staticClass:"img_effect_bg",attrs:{src:t.model.background,alt:""}}),t._v(" "),t._l(t.avatars,function(i,a){return[e("avatar",{key:a,class:{on:a===t.currentIndex},style:{left:i.x,top:i.y},attrs:{width:i.width,height:i.height,radius:i.radius,ratio:t.ratio/t.ratioHeight,image:i.image},on:{init:function(i){t.init(i,a)},click:function(i){t.click(i,a)},uploadfile:t.upload}})]})],2),t._v(" "),e("ul",{staticClass:"img_operation clearfix"},[e("li",{staticClass:"replace"},[e("a",{attrs:{href:"javascript:;"},on:{click:t.chooseFile}},[e("i"),t._v(" "),e("span",[t._v("更换")])])]),t._v(" "),e("li",{staticClass:"rotating"},[e("a",{attrs:{href:"javascript:;"},on:{click:t.rotate}},[e("i"),t._v(" "),e("span",[t._v("旋转")])])]),t._v(" "),e("li",{staticClass:"flip_horizontal"},[e("a",{attrs:{href:"javascript:;"},on:{click:t.flipY}},[e("i"),t._v(" "),e("span",[t._v("垂直")])])]),t._v(" "),e("li",{staticClass:"flip_vertical"},[e("a",{attrs:{href:"javascript:;"},on:{click:t.flipX}},[e("i"),t._v(" "),e("span",[t._v("水平")])])])])])},n=[],o={render:a,staticRenderFns:n};i.a=o},function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement;return(t._self._c||i)("calendar-maker",{attrs:{"submit-api":t.submitUrl,model:t.model},on:{save:t.save}})},n=[],o={render:a,staticRenderFns:n};i.a=o}]);
//# sourceMappingURL=app.js.map